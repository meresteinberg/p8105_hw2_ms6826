p8105_hw2_ms6826
================
2024-09-26

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.1
    ## ✔ ggplot2   3.5.1     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.3     ✔ tidyr     1.3.1
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

## Problem 1

``` r
nyc_df= 
  read_csv(file="./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv", na = c(".", "NA", "")) |> 
  janitor::clean_names() |> 
  mutate(across(route1:route11, as.character)) |> 
   mutate(
    routes_served = paste(route1, route2, route3, route4, route5, route6, route6, route8, route9, route10, route11, sep = ", ")
  ) |> 
  mutate(routes_served = gsub(", NA", "", routes_served)) |> 
  mutate(
    entry = case_match(
      entry,
      "YES" ~ TRUE,
      "NO" ~ FALSE
    )) |> 
  select(line, station_name, station_latitude, station_longitude, routes_served, entry, vending, entrance_type, ada) 
```

    ## Rows: 1868 Columns: 32
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (22): Division, Line, Station Name, Route1, Route2, Route3, Route4, Rout...
    ## dbl  (8): Station Latitude, Station Longitude, Route8, Route9, Route10, Rout...
    ## lgl  (2): ADA, Free Crossover
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
nyc_df
```

    ## # A tibble: 1,868 × 9
    ##    line     station_name station_latitude station_longitude routes_served entry
    ##    <chr>    <chr>                   <dbl>             <dbl> <chr>         <lgl>
    ##  1 4 Avenue 25th St                  40.7             -74.0 R             TRUE 
    ##  2 4 Avenue 25th St                  40.7             -74.0 R             TRUE 
    ##  3 4 Avenue 36th St                  40.7             -74.0 N, R          TRUE 
    ##  4 4 Avenue 36th St                  40.7             -74.0 N, R          TRUE 
    ##  5 4 Avenue 36th St                  40.7             -74.0 N, R          TRUE 
    ##  6 4 Avenue 45th St                  40.6             -74.0 R             TRUE 
    ##  7 4 Avenue 45th St                  40.6             -74.0 R             TRUE 
    ##  8 4 Avenue 45th St                  40.6             -74.0 R             TRUE 
    ##  9 4 Avenue 45th St                  40.6             -74.0 R             TRUE 
    ## 10 4 Avenue 53rd St                  40.6             -74.0 R             TRUE 
    ## # ℹ 1,858 more rows
    ## # ℹ 3 more variables: vending <chr>, entrance_type <chr>, ada <lgl>

#### This dataset contains information about each distinct NYC subway station (including the multiple entrances for each station). I imported the dataset and used the janitor::clean names function to change the column names to all lowercase/remove any spaces and the na=c() function makes sure any missing values will be labelled as “NA”. I used the mutate function to combine the routes tables into one table that lists all of the routes served and also used the mutate function to convert the entry column from a character to a logical variable. I used the select function to only include information on the name of the train station, its specific location(latitude/longitude), the routes the station serves, the street or avenue the train line runs along, whether or not the train has vending machines for subway cards, the type of entrance to get to the subway (e.g, stairs, elevator, etc.), whether there is an entrance at that location (variable entry), and if the station is ADA compliant. The data appears more tidy than it did before. Since I did not retain information on the entrance locations for each station (e.g., corner, entrance_location, etc.), however, some of the data lines appear to be the same without the entrance location information. The dimensions are 1868 columns x 9 rows.

``` r
nyc_distinct_df=
distinct(nyc_df, line, station_name, .keep_all = TRUE)
```

#### There are 465 distinct stations.

``` r
  filter(nyc_distinct_df, ada=="TRUE")
```

    ## # A tibble: 84 × 9
    ##    line      station_name station_latitude station_longitude routes_served entry
    ##    <chr>     <chr>                   <dbl>             <dbl> <chr>         <lgl>
    ##  1 4 Avenue  Atlantic Av…             40.7             -74.0 B, Q, D, N, … TRUE 
    ##  2 4 Avenue  DeKalb Av                40.7             -74.0 B, Q, R       TRUE 
    ##  3 4 Avenue  Pacific St               40.7             -74.0 B, Q, D, N, … TRUE 
    ##  4 42nd St … Grand Centr…             40.8             -74.0 GS, 4, 5, 6,… TRUE 
    ##  5 6 Avenue  34th St                  40.7             -74.0 B, D, F, M, … TRUE 
    ##  6 6 Avenue  47-50th Sts…             40.8             -74.0 B, D, F, M    TRUE 
    ##  7 6 Avenue  Church Av                40.6             -74.0 F             TRUE 
    ##  8 63rd Str… 21st St                  40.8             -73.9 F             TRUE 
    ##  9 63rd Str… Lexington Av             40.8             -74.0 F             TRUE 
    ## 10 63rd Str… Roosevelt I…             40.8             -74.0 F             TRUE 
    ## # ℹ 74 more rows
    ## # ℹ 3 more variables: vending <chr>, entrance_type <chr>, ada <lgl>

#### There are 84 distinct stations that have ADA compliance.

``` r
filter(nyc_df, vending=="NO", entry =="TRUE")
```

    ## # A tibble: 69 × 9
    ##    line     station_name station_latitude station_longitude routes_served entry
    ##    <chr>    <chr>                   <dbl>             <dbl> <chr>         <lgl>
    ##  1 4 Avenue 9th St                   40.7             -74.0 F, G, R       TRUE 
    ##  2 6 Avenue 7th Av                   40.7             -74.0 F             TRUE 
    ##  3 6 Avenue 7th Av                   40.7             -74.0 F             TRUE 
    ##  4 6 Avenue 7th Av                   40.7             -74.0 F             TRUE 
    ##  5 6 Avenue 7th Av                   40.7             -74.0 F             TRUE 
    ##  6 6 Avenue 7th Av                   40.7             -74.0 F             TRUE 
    ##  7 6 Avenue 7th Av                   40.7             -74.0 F             TRUE 
    ##  8 6 Avenue 7th Av                   40.7             -74.0 F             TRUE 
    ##  9 6 Avenue 7th Av                   40.7             -74.0 F             TRUE 
    ## 10 6 Avenue Bergen St                40.7             -74.0 F, G          TRUE 
    ## # ℹ 59 more rows
    ## # ℹ 3 more variables: vending <chr>, entrance_type <chr>, ada <lgl>

#### 69/1868 station entrances/exists have no vending but allow entrance.

``` r
nyc_reformat= 
  read_csv(file="./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv", na = c(".", "NA", "")) |> 
  janitor::clean_names() |> 
  mutate(across(route1:route11, as.character)) |>  
  pivot_longer(
    cols = route1:route11,
    names_to = "route_number",
    values_to = "route_name" ,
    values_drop_na = TRUE,
    names_prefix = "route"
  ) 
```

    ## Rows: 1868 Columns: 32
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (22): Division, Line, Station Name, Route1, Route2, Route3, Route4, Rout...
    ## dbl  (8): Station Latitude, Station Longitude, Route8, Route9, Route10, Rout...
    ## lgl  (2): ADA, Free Crossover
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
nyc_reformat_dis=
distinct(nyc_reformat, line, station_name, .keep_all = TRUE) |> 
  filter(route_name =="A")
```

#### 60 distinct stations serve the A train

``` r
nyc_reformat_dis=
distinct(nyc_reformat, line, station_name, .keep_all = TRUE) |> 
  filter(route_name =="A") |> 
  filter(ada=="TRUE")
```

#### Of the 60 distinct stations that serve the A train, 17 of them are ADA compliant.

## Problem 2
